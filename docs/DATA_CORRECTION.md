# 数据修正说明

## 📋 修正概述

根据用户反馈，对示例数据进行了重要修正，使其更符合2025年绿色电力证书市场的实际情况。

## 🔧 修正内容

### 1. 价格数据修正

**修正前**：
- 绿证单价：125.50元 - 150.00元
- 总价：6,200,000元 - 15,000,000元
- ❌ 问题：价格远高于实际市场价格

**修正后**：
- 绿证单价：6.58元 - 7.35元
- 总价：658,000元 - 735,000元
- ✅ 符合2025年实际市场价格（约7元人民币/张）

### 2. 详情链接优化

**修正前**：
- 使用example.com示例链接
- 点击后无法显示项目信息
- ❌ 问题：链接无效，用户体验差

**修正后**：
- 详情链接字段设为NULL
- UI显示"暂无链接"提示
- 添加说明：实际数据会包含真实链接
- ✅ 明确告知用户这是示例数据

### 3. 数据条数调整

**修正前**：3条示例数据
**修正后**：4条示例数据

增加了更多样化的示例，包括：
- 风电项目（通道）
- 光伏项目（未标注）
- 分布式光伏（通道）
- 集中式风电（未标注）

### 4. 通道类型支持三种状态

**新增功能**：
- ✅ "通道"：明确标注为通道交易
- ✅ "非通道"：明确标注为非通道交易  
- ✅ "-"：未标注通道类型（有些项目没有此信息）

**实现方式**：
- 数据库字段：`is_channel BOOLEAN`（支持NULL）
- true → 显示蓝色徽章"通道"
- false → 显示灰色徽章"非通道"
- null → 显示"-"

## 📊 修正后的示例数据

### 数据1：风电项目
```
项目名称：2025年度风电绿色电力证书交易项目
招标单位：国家电网有限公司
投标单位：华能新能源股份有限公司
中标单位：华能新能源股份有限公司
总价：¥700,000.00
单价：¥7.20
通道类型：通道
绿证年份：2025
交易日期：2025-12-15
详情链接：暂无链接
```

### 数据2：光伏项目
```
项目名称：光伏绿证采购项目（第一批）
招标单位：南方电网能源发展研究院
投标单位：中国三峡新能源（集团）股份有限公司
中标单位：中国三峡新能源（集团）股份有限公司
总价：¥680,000.00
单价：¥6.80
通道类型：-（未标注）
绿证年份：2025
交易日期：2025-12-18
详情链接：暂无链接
```

### 数据3：分布式光伏
```
项目名称：分布式光伏绿证交易项目
招标单位：中国华电集团有限公司
投标单位：龙源电力集团股份有限公司
中标单位：龙源电力集团股份有限公司
总价：¥735,000.00
单价：¥7.35
通道类型：通道
绿证年份：2025
交易日期：2025-12-20
详情链接：暂无链接
```

### 数据4：集中式风电
```
项目名称：集中式风电绿证交易（第二批）
招标单位：中国大唐集团有限公司
投标单位：国家电投集团新能源科技发展有限公司
中标单位：国家电投集团新能源科技发展有限公司
总价：¥658,000.00
单价：¥6.58
通道类型：-（未标注）
绿证年份：2025
交易日期：2025-12-22
详情链接：暂无链接
```

## 📈 价格统计

修正后的价格统计：
- **最低单价**：¥6.58
- **最高单价**：¥7.35
- **平均单价**：¥6.98
- **价格范围**：符合2025年实际市场情况

## 🎯 UI优化

### 1. 详情链接显示
- 有链接：显示可点击的图标
- 无链接：显示"暂无链接"文字提示

### 2. 数据说明
在交易数据表格上方添加提示：
```
💡 提示：当前显示的是示例数据（2025年绿证价格约7元），
详情链接需要从实际网站抓取
```

## 📝 文档更新

### 更新的文档
1. **README.md** - 添加数据抓取定制指南链接
2. **QUICKSTART.md** - 更新示例数据说明
3. **DELIVERY.md** - 更新示例数据信息
4. **TODO.md** - 添加修正说明
5. **TransactionTable.tsx** - 优化UI显示

### 新增的文档
1. **SCRAPING_GUIDE.md** - 详细的数据抓取定制指南（8000+字）
2. **DATA_CORRECTION.md** - 本文档

## ⚠️ 重要说明

### 关于示例数据
1. **价格真实性**：
   - 示例数据中的价格已根据2025年实际市场情况调整
   - 绿证单价约7元人民币/张，符合当前市场价格
   - 总价根据单价和数量计算得出

2. **详情链接**：
   - 示例数据中的详情链接为空（NULL）
   - 这是因为示例数据不对应真实的网页
   - 实际使用时，从真实网站抓取的数据会包含完整的详情链接

3. **数据来源**：
   - 示例数据仅用于演示应用功能
   - 不代表真实的交易记录
   - 实际使用时需要从真实网站抓取数据

### 关于数据抓取
1. **定制必要性**：
   - 当前Edge Function提供的是框架代码
   - 需要根据实际目标网站的HTML结构进行定制
   - 详细说明请查看 [SCRAPING_GUIDE.md](SCRAPING_GUIDE.md)

2. **定制步骤**：
   - 分析目标网站的HTML结构
   - 编写数据提取逻辑
   - 测试验证数据准确性

3. **预期结果**：
   - 从真实网站抓取的数据会包含所有10个字段
   - 包括完整的详情链接
   - 价格数据反映实际市场情况

## ✅ 验证结果

### 数据库验证
```sql
SELECT 
  MIN(unit_price) as 最低单价,
  MAX(unit_price) as 最高单价,
  AVG(unit_price) as 平均单价,
  COUNT(*) as 记录数
FROM transactions;
```

**结果**：
- 最低单价：6.58元
- 最高单价：7.35元
- 平均单价：6.98元
- 记录数：4条

✅ 价格范围符合2025年实际市场情况

### 代码质量验证
```bash
npm run lint
```

**结果**：
```
Checked 80 files in 122ms. No fixes applied.
```

✅ 所有代码通过ESLint检查

## 📚 相关文档

- [数据抓取定制指南](SCRAPING_GUIDE.md) - 详细的定制步骤和示例
- [快速开始指南](QUICKSTART.md) - 包含更新后的示例数据说明
- [完整使用说明](USAGE.md) - 应用功能和使用方法
- [项目交付说明](DELIVERY.md) - 完整的交付文档

## 🎉 修正完成

所有修正已完成并通过验证：
- ✅ 价格数据符合实际市场情况
- ✅ 详情链接显示优化
- ✅ UI提示信息完善
- ✅ 文档更新完整
- ✅ 代码质量检查通过

---

**修正日期**：2026-01-26
**版本**：v1.1.0
