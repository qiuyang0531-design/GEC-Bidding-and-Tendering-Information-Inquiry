# 更新日志

## v1.2.0 (2026-01-26)

### 🎯 新增功能

#### 通道类型三种状态支持
- ✅ **通道**（is_channel = true）：明确标注为通道交易，显示蓝色徽章
- ✅ **非通道**（is_channel = false）：明确标注为非通道交易，显示灰色徽章
- ✅ **未标注**（is_channel = null）：项目未标注通道类型，显示"-"

### 📊 数据更新

#### 示例数据调整
- 更新2条示例数据的通道类型为NULL（未标注）
- 保持2条示例数据的通道类型为true（通道）
- 展示通道类型的三种实际应用场景

#### 当前示例数据分布
| 项目 | 单价 | 通道类型 |
|------|------|---------|
| 2025年度风电绿色电力证书交易项目 | 7.20元 | ✅ 通道 |
| 光伏绿证采购项目（第一批） | 6.80元 | ➖ 未标注 |
| 分布式光伏绿证交易项目 | 7.35元 | ✅ 通道 |
| 集中式风电绿证交易（第二批） | 6.58元 | ➖ 未标注 |

### 🔧 技术改进

#### Edge Function优化
- 更新parseChannelType函数注释
- 添加通道类型解析辅助函数示例
- 完善字段说明文档

#### 代码优化
- TransactionTable组件已正确处理null值
- UI显示逻辑完善（null显示为"-"）
- 数据库字段支持NULL值

### 📚 文档更新

#### 新增文档
- ✅ **CHANNEL_TYPE_GUIDE.md**（5000+字）
  - 通道类型三种状态的详细说明
  - 数据库设计和UI显示
  - 数据抓取处理方法
  - 实际应用场景和最佳实践

#### 更新文档
- ✅ **SCRAPING_GUIDE.md**
  - 更新parseChannelType函数说明
  - 添加三种状态的处理示例
  - 完善通道类型解析逻辑

- ✅ **QUICKSTART.md**
  - 更新示例数据说明
  - 添加通道类型三种状态的说明
  - 调整示例数据的通道类型显示

- ✅ **DATA_CORRECTION.md**
  - 记录通道类型功能更新
  - 更新示例数据说明
  - 添加三种状态的实现方式

- ✅ **TODO.md**
  - 更新完成情况
  - 添加通道类型说明

- ✅ **README.md**
  - 添加CHANNEL_TYPE_GUIDE.md链接
  - 添加DATA_CORRECTION.md链接

### ✅ 验证结果

#### 数据库验证
```sql
SELECT 
  CASE 
    WHEN is_channel = true THEN '通道'
    WHEN is_channel = false THEN '非通道'
    WHEN is_channel IS NULL THEN '未标注'
  END as 通道类型,
  COUNT(*) as 数量
FROM transactions
GROUP BY is_channel;
```

**结果**：
- 通道：2条
- 未标注：2条
- 总计：4条

#### 代码质量验证
```bash
npm run lint
```
**结果**：✅ 通过（80个文件，无错误）

### 🎨 UI效果

#### 通道类型显示
- **通道**：蓝色徽章，文字"通道"
- **非通道**：灰色徽章，文字"非通道"
- **未标注**：普通文本"-"

#### 用户体验
- 清晰区分三种状态
- 视觉效果一致
- 符合用户预期

### 📝 使用说明

#### 数据抓取时
```typescript
// 使用parseChannelType函数处理通道类型
is_channel: parseChannelType(extractedText)

// 函数会返回：
// - true: 文本包含"通道"且不包含"非"
// - false: 文本包含"非通道"
// - null: 空值、"-"或其他情况
```

#### 数据展示时
- 应用会自动根据is_channel的值显示相应的UI
- null值显示为"-"，不会显示为空白
- 用户可以清楚地看到哪些项目未标注通道类型

### 🔄 兼容性

#### 向后兼容
- 现有数据不受影响
- 已有的true/false值继续正常显示
- 新增的null值支持不影响现有功能

#### 数据迁移
- 无需数据迁移
- 数据库字段本身就支持NULL
- 只是更新了部分示例数据

### 🎯 业务价值

#### 更真实的数据展示
- 反映实际业务场景
- 有些项目确实没有标注通道类型
- 避免强制填充不准确的数据

#### 更好的用户体验
- 用户可以清楚地看到数据的完整性
- "-"明确表示"未标注"，而不是"错误"或"缺失"
- 符合用户对真实数据的预期

#### 更灵活的数据处理
- 支持三种状态，适应不同的数据源
- 数据抓取时可以如实记录
- 数据分析时可以单独统计未标注的情况

---

## v1.1.0 (2026-01-26)

### 🔧 数据修正

#### 价格数据调整
- 绿证单价从125-150元调整为6.58-7.35元
- 符合2025年实际市场价格（约7元/张）
- 总价相应调整

#### 详情链接优化
- 示例数据的详情链接设为NULL
- UI显示"暂无链接"提示
- 添加说明文字

### 📚 文档新增
- ✅ SCRAPING_GUIDE.md（8000+字）
- ✅ DATA_CORRECTION.md
- ✅ DELIVERY.md

---

## v1.0.0 (2026-01-26)

### 🎉 初始版本

#### 核心功能
- ✅ 用户认证系统
- ✅ 网址管理功能
- ✅ 数据查询功能
- ✅ 数据展示功能
- ✅ 数据存储功能

#### 数据字段
- ✅ 10个交易信息字段完整实现
- ✅ 数据库结构完善
- ✅ RLS安全策略

#### 文档
- ✅ README.md
- ✅ QUICKSTART.md
- ✅ USAGE.md
- ✅ CHECKLIST.md
- ✅ TODO.md

---

**最后更新**：2026-01-26
**当前版本**：v1.2.0
